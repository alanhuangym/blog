---
title: 推荐系统4
date: 2017-08-31 14:17:36
tags:
- recommendationsystem
categories:
- recommendationsystem
---

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

### 数据归一化

现在每个用户的属性变为了持有产品的份额：

直接使用份额计算会出现偏差化：

例如购买了一款产品金额较大，那么权重就会偏大

那么就将份额标准化

**1.固定阈值**

例如（万分之X）

| 方案   | 1      | 2        | 3       | 4       | 5    |
| ---- | ------ | -------- | ------- | ------- | ---- |
| 方案1  | 0-0.03 | 0.03-0.1 | 0.1-0.3 | 0.3-1.0 | 1.0+ |
| 方案2  | 0-0.01 | 0.01-0.1 | 0.1-1.0 | 1.0-2.0 | 2.0+ |

划分为五个评分，0分则是没有持仓过该产品



**2.平均持仓数**

计算出每个产品的用户平均持仓数，然后根据平均持仓倍数去划分数据：

| 方案   | 1      | 2        | 3        | 4        | 5     |
| ---- | ------ | -------- | -------- | -------- | ----- |
| 方案1  | 0-0.5倍 | 0.5-1.0倍 | 1.0-1.5倍 | 1.5-2.0倍 | 2.0+倍 |
|      |        |          |          |          |       |



**3.排序划分**

将一款产品的所有用户进行排序，然后根据排序去划分数据

| 方案   | 1    | 2    | 3    | 4    | 5    |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 方案1  | 20%  | 20%  | 20%  | 20%  | 20%  |
| 方案   | 10%  | 25%  | 30%  | 25%  | 10%  |



**4.（0，1）标准化（max-min）**

$${x}_{normalization}=\frac{x-Min}{Max-Min}$$

然后将得到的结果乘以5，得到投资偏好。



**5.Z-score标准化**

将数据划分为正态分布化的数据

$${x}_{normalization}=\frac{x-\mu }{\sigma }$$

其中的u是平均数，sigma是标准差



### 实验结果：

**0.不进行归一化**

```
目标客户
产品1 0.250494227106 新睿利优先91天 债券型 91
产品2 0.228637469027 新睿利优先91天 债券型 91
产品3 0.377176516585 新睿利优先91天 债券型 91
产品4 0.256939429748 新睿利优先91天 债券型 91
产品5 0.758798112353 新睿利优先91天 债券型 91
产品6 0.0578450717465 多添利14天 短期理财类 14
产品7 0.288599403176 新睿利优先91天 债券型 91
产品8 1.38227279375 新睿利优先91天 债券型 91
产品9 0.0835590588465 多添利56天 短期理财类 56
产品10 4.02077615455 多添利X36天 短期理财类 36
***********************************
d96e788472f4d36ae9163192f84635d2b3332ced
产品1 0.249496242138 新睿利优先91天 债券型 91
产品5 0.758798112353 新睿利优先91天 债券型 91
879002 0.0262265839131 多添利7天 短期理财类 7
产品6 0.0390845079368 多添利14天 短期理财类 14
产品9 0.0828958917128 多添利56天 短期理财类 56
产品10 4.02077615455 多添利X36天 短期理财类 36
***********************************
b598fb7de5df3b8a73c5c23c98fb3c73483b020b
产品1 0.249496242138 新睿利优先91天 债券型 91
产品2 0.226822885939 新睿利优先91天 债券型 91
产品3 0.374926954856 新睿利优先91天 债券型 91
产品7 0.259999462321 新睿利优先91天 债券型 91
GF1809 0.306768321508 新睿利优先91天 债券型 91
879002 0.0233817984367 多添利7天 短期理财类 7
879006 0.115620874347 多添利91天 短期理财类 91
产品10 4.02077615455 多添利X36天 短期理财类 36
***********************************
36e64d058bd7a6c387ffe388179d4639749cc44f
产品1 0.249496242138 新睿利优先91天 债券型 91
GF1814 0.249990015339 新睿利优先91天 债券型 91
GF1804 0.351223807748 新睿利优先91天 债券型 91
产品3 0.375676808766 新睿利优先91天 债券型 91
产品7 0.323959330052 新睿利优先91天 债券型 91
GF1803 0.407730728967 新睿利优先91天 债券型 91
产品2 0.229544760571 新睿利优先91天 债券型 91
GF1812 0.355765682516 新睿利优先91天 债券型 91
879119 0.729319808632 多添利X364天 短期理财类 364
GF1809 0.311063078009 新睿利优先91天 债券型 91
产品5 0.770938882151 新睿利优先91天 债券型 91
879162 1.2696774613 多添利X182天 短期理财类 182
879002 0.020420103968 多添利7天 短期理财类 7
产品6 0.0394753530162 多添利14天 短期理财类 14
产品8 1.38227279375 新睿利优先91天 债券型 91
产品9 0.0830616834962 多添利56天 短期理财类 56
879004 0.0871009660079 多添利28天 短期理财类 28
产品10 4.02077615455 多添利X36天 短期理财类 36
```

1.固定值归一化

```
目标客户
产品1 0.250494227106 3 新睿利优先91天 债券型 91
产品2 0.228637469027 3 新睿利优先91天 债券型 91
产品3 0.377176516585 4 新睿利优先91天 债券型 91
产品4 0.256939429748 3 新睿利优先91天 债券型 91
产品5 0.758798112353 4 新睿利优先91天 债券型 91
产品6 0.0578450717465 2 多添利14天 短期理财类 14
产品7 0.288599403176 3 新睿利优先91天 债券型 91
产品8 1.38227279375 5 新睿利优先91天 债券型 91
产品9 0.0835590588465 2 多添利56天 短期理财类 56
产品10 4.02077615455 5 多添利X36天 短期理财类 36
***********************************
bb7a0f6f5d59a3bfcca72a685810c38c2bc8e3a3
产品1 0.262470046729 3 新睿利优先91天 债券型 91
产品3 0.451412053647 4 新睿利优先91天 债券型 91
产品4 0.299002492211 3 新睿利优先91天 债券型 91
产品6 0.101619720636 3 多添利14天 短期理财类 14
产品8 1.38227279375 5 新睿利优先91天 债券型 91
产品9 0.146891520115 3 多添利56天 短期理财类 56
***********************************
d96e788472f4d36ae9163192f84635d2b3332ced
产品1 0.249496242138 3 新睿利优先91天 债券型 91
产品5 0.758798112353 4 新睿利优先91天 债券型 91
879002 0.0262265839131 1 多添利7天 短期理财类 7
产品6 0.0390845079368 2 多添利14天 短期理财类 14
产品9 0.0828958917128 2 多添利56天 短期理财类 56
产品10 4.02077615455 5 多添利X36天 短期理财类 36
***********************************
f0f5de95640aabbb217a35a7b141b2bae46783aa
产品5 4.58465819484 5 新睿利优先91天 债券型 91
产品8 3.31469015941 5 新睿利优先91天 债券型 91
产品3 0.374926954856 4 新睿利优先91天 债券型 91
```

2.平均持仓数

```
目标客户
产品1 1 新睿利优先91天 债券型 91
产品2 1 新睿利优先91天 债券型 91
产品3 1 新睿利优先91天 债券型 91
产品4 1 新睿利优先91天 债券型 91
产品5 1 新睿利优先91天 债券型 91
产品6 1 多添利14天 短期理财类 14
产品7 1 新睿利优先91天 债券型 91
产品8 1 新睿利优先91天 债券型 91
产品9 1 多添利56天 短期理财类 56
产品10 1 多添利X36天 短期理财类 36
***********************************
bb7a0f6f5d59a3bfcca72a685810c38c2bc8e3a3
产品1 1 新睿利优先91天 债券型 91
产品3 1 新睿利优先91天 债券型 91
产品4 1 新睿利优先91天 债券型 91
产品6 1 多添利14天 短期理财类 14
产品8 1 新睿利优先91天 债券型 91
产品9 1 多添利56天 短期理财类 56
***********************************
7b0fa22fec8c28836d6a52cd35aa818218cd4021
产品1 1 新睿利优先91天 债券型 91
产品2 1 新睿利优先91天 债券型 91
产品7 1 新睿利优先91天 债券型 91
产品4 1 新睿利优先91天 债券型 91
产品6 1 多添利14天 短期理财类 14
***********************************
21cfa76118cad37e9af116b01ca19230b5def327
产品1 1 新睿利优先91天 债券型 91
产品2 1 新睿利优先91天 债券型 91
产品7 1 新睿利优先91天 债券型 91
产品4 1 新睿利优先91天 债券型 91
```



3.(0,1)归一化

```
目标客户
产品1 0.00250205597229 新睿利优先91天 债券型 91
产品2 0.00611680178649 新睿利优先91天 债券型 91
产品3 0.00628624275145 新睿利优先91天 债券型 91
产品4 0.00281313461987 新睿利优先91天 债券型 91
产品5 0.0110457409948 新睿利优先91天 债券型 91
产品6 9.96838674323e-05 多添利14天 短期理财类 14
产品7 0.00168125266956 新睿利优先91天 债券型 91
产品8 0.0126821535272 新睿利优先91天 债券型 91
产品9 0.000251958300901 多添利56天 短期理财类 56
产品10 0.00139546358688 多添利X36天 短期理财类 36
***********************************
53685bbde6333d222b00c006f27ef581c88a4b1d
产品1 0.00330949236175 新睿利优先91天 债券型 91
产品2 0.00606825574057 新睿利优先91天 债券型 91
产品4 0.00277429449691 新睿利优先91天 债券型 91
GF1808 0.0049099997054 新睿利优先91天 债券型 91
产品5 0.0110457409948 新睿利优先91天 债券型 91
产品8 0.0126821535272 新睿利优先91天 债券型 91
879004 0.000391751898821 多添利28天 短期理财类 28
***********************************
2ff657077263d4833bad7d8c8035c623e336c977
GF1814 0.00701227648786 新睿利优先91天 债券型 91
产品2 0.00646876061945 新睿利优先91天 债券型 91
产品3 0.00624875024995 新睿利优先91天 债券型 91
产品4 0.00280203744188 新睿利优先91天 债券型 91
879637 0.0 多添利X97天 短期理财类 97
GF1812 0.00261713803293 新睿利优先91天 债券型 91
87905M 0.0 多添利X181天 短期理财类 181
87913V 0.0 多添利X90天 短期理财类 90
GF1808 0.00505729969656 新睿利优先91天 债券型 91
产品5 0.0110457409948 新睿利优先91天 债券型 91
产品1 0.0025718344257 新睿利优先91天 债券型 91
产品7 0.00151464204465 新睿利优先91天 债券型 91
产品8 0.0126821535272 新睿利优先91天 债券型 91
879580 0.0 多添利X91天 短期理财类 91
87907S 0.0 多添利X181天 短期理财类 181
879410 0.0 多添利X90天 短期理财类 90
***********************************
ece0720feb0ff36294d63aef73021496db43f7b3
产品5 0.0111852661442 新睿利优先91天 债券型 91
879002 4.82520920901e-05 多添利7天 短期理财类 7
产品8 0.0126821535272 新睿利优先91天 债券型 91
```

4.Z-score

```
目标客户
产品1 -0.319787520279
产品2 -0.40743813927
产品3 -0.349684885459
产品4 -0.359717190383
产品5 -0.405274114882
产品6 -0.0725244748709
产品7 -0.262125545055
产品8 -0.441496892426
产品9 -0.133596718487
产品10 -0.266415990907
***********************************
da7ab1c15153fcf193a6fc7d754ae0d3c4d598af
产品1 -0.218140849102
产品2 -0.179129356215
产品4 -0.331388969459
GF1810 -0.268200096133
产品5 -0.405274114882
产品8 -0.441496892426
***********************************
bd086050bbaec0d4f07094224c4bf46cf64d057c
产品1 -0.320230425164
产品2 -0.40743813927
87911V -0.247691581664
产品3 -0.350590828042
产品4 -0.356399470815
GF1814 -0.0395975964336
产品5 -0.404049998232
GF1874 -0.30671101606
产品6 -0.0764411040059
产品7 -0.267856858948
***********************************
2681a76a23e95e26c0a84029644bb510547ee7cd
产品1 -0.320230425164
产品2 -0.511840648104
产品7 -0.316486188947
产品5 -0.488208017918
879002 -0.0736386038632
产品4 -0.432451811674
```



### 时间权重：

建立一个字典

{

“user1”:

{“87006”：“2017-01-03”

}

}

然后 在计算金额权重的时候，再乘以这个权重。